<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- isp.olt -->
        <record id="action_silver_olt" model="ir.actions.act_window">
            <field name="name">Equipos OLT</field>
            <field name="res_model">silver.olt</field>
            <field name="view_mode">list,form</field>
            <field name="context">{'search_default_group_by_node_id': 1}</field>
        </record>

        <record id="view_olt_search" model="ir.ui.view">
            <field name="name">silver.olt.search.view</field>
            <field name="model">silver.olt</field>
            <field name="arch" type="xml">
                <search string="Equipos OLT">
                    <field name="name"/>
                    <field name="node_id"/>
                    <filter name="group_by_node_id"
                    string="Nodo"
                    context="{'group_by':'node_id'}"
                    />
                    <filter name="group_by_node_id"
                    string="Nodo"
                    context="{'group_by':'node_id'}"
                    />
                </search>
            </field>
        </record>


        <record id="view_silver_olt_tree" model="ir.ui.view">
            <field name="name">silver.olt.list</field>
            <field name="model">silver.olt</field>
            <field name="arch" type="xml">
                <list string="Equipos OLT ISP" default_order="name desc">
                    <field name="name"/>
                    <!--field name="brand_id"/-->
                    <!--field name="model"/-->
                    <field name="ip"/>
                    <field name="port"/>
                    <field name="username"/>
                    <field name="state"  widget="badge"
                           decoration-success="state in ['active', 'connected']"
                           decoration-warning="state in ('suspended', 'disabled')"
                           decoration-danger="state in ['removed', 'down']"/>
                </list>
            </field>
        </record>

        <record id="view_silver_olt_form" model="ir.ui.view">
            <field name="name">silver.olt.form</field>
            <field name="model">silver.olt</field>
            <field name="arch" type="xml">
                <form string="Equipo OLT ISP">
                    <header>
                        <!--button name="create_olt_card" string="Crear Tarjeta OLT" type="object"/-->
                    </header>
                    <sheet string="Equipo OLT ISP">
                        <div class="oe_button_box" name="button_box">
                            <!--button class="oe_stat_button" type="object" name="action_view_olt_cards"
                                    icon="fa-arrows-v">
                                <field string="Tarjetas OLT" name="olt_card_count" widget="statinfo"/>
                            </button>

                            <button name="action_create_profile_olt" type="object" class="oe_stat_button"
                                    icon="fa-arrows-v" string="Crear Perfiles"/-->

                        </div>
                        <!--widget name="web_ribbon" title="Active" invisible="state == 'down'"/>
                        <widget name="web_ribbon" title="Down" bg_color="bg-danger" invisible="state == 'active'"/-->
                        <field name="state" invisible="1"/>
                        <div class="oe_title">
                            <h1>
                                <label for="name" string="Nombre"/>
                                <field name="name" readonly="core_id==False"/>
                            </h1>
                        </div>
                        <group name="olt">
                            <group>
                                <!--field name="hostname_olt"/-->
                                <field name="core_ids" widget="many2many_tags" invisible="1"/>
                                <field name="node_id"/>
                                <field name="core_id" domain="[('node_id', '=', node_id)]"/>/>

                                <!--field name="brand_id"/-->

                                <field name="num_slot_olt"/>
                                <field name="num_ports1" required="num_slot_olt&gt;0" invisible="num_slot_olt&lt;1"/>
                                <field name="num_ports2" required="num_slot_olt&gt;1" invisible="num_slot_olt&lt;2"/>
                                <field name="num_ports3" required="num_slot_olt&gt;2" invisible="num_slot_olt&lt;3"/>
                                <field name="num_ports4" required="num_slot_olt&gt;3" invisible="num_slot_olt&lt;4"/>
                                <field name="num_ports5" required="num_slot_olt&gt;4" invisible="num_slot_olt&lt;5"/>


                                <button name="action_generar" string="Generar" type="object"/>
                                <br/>


                            </group>
                            <group name="core_conexion" string="Datos Conexion">

                                <field name="ip"/>
                                <field name="port" invisible="1"/>
                                <field name="type_connection"/>
                                <field name="port_ssh" invisible="type_connection!='ssh'" />
                                <field name="port_telnet" invisible="type_connection=='ssh'" />
                                <field name="kex_algorithms_ids" widget="many2many_tags" invisible="1"/>

                                <field name="is_multi_user_olt" widget="boolean_toggle" invisible="1"/>

                                <field name="username" invisible="is_multi_user_olt"/>



                                <div class="o_row" colspan="2" name="password" >
    <label for="password" decoration-bf="1"/>
                                <field name="password" password="True"
                                     />



                                      <button name="action_connect_olt" type="object" string="Probar" invisible="state!='pending'"
                                        class="oe_highlight" />
                                    <button name="action_connect_olt" type="object" string="Down" invisible="state!='down'"
                                        class="oe_highlight status-disabled" />
                                    <button name="action_connect_olt" type="object" string="Activo" invisible="state!='active' and state!='connected'"
                                        class="oe_highlight status-active" />
</div>

                                <!--button class="oe_inline oe_link " name="action_send_password"
                                        string=" →Enviar Contraseña" type="object"/-->
                                <!--field name="secret_olt"/-->
                                <!--button name="action_connect_olt" type="object" class="oe_stat_button" icon="fa-signal"
                                  string="Probar Conexion"/-->


                                <!--field name="state"  widget="badge"
                           decoration-success="state in ['active', 'connected']"
                           decoration-warning="state in ('suspended', 'disabled')"
                           decoration-danger="state in ['removed', 'down']"/-->
                                <field name="hostname_olt" invisible="state!='active'"/>


                                <!--button name="action_connect_olt" type="object" string="Probar Conexión"
                                        class="oe_highlight"/-->
                                <br/>

                            </group>
                        </group>

                        <notebook colspan="4">

                            <page string="Puertos">
                                <field name="port_ids">
                                    <list string="Puertos OLT ISP" default_order="name desc">
                                                <field name="id" column_invisible="1"/>
                                                <field name="name" widget="record_link"/>

                                        <field name="num_port"/>
                                        <field name="olt_card_n"/>
                                        <!--field name="type_access_net"/-->
                                    </list>
                                </field>
                            </page>

                            <page name="ip_addresses" string="Direcciones IP">

                                <field name="ip_address_pool_ids" nolabel="1" widget="one2many_list">
                                    <list multi_selectable="1" colspan="2" editable="bottom">
                                        <field name="name"  readonly="not name"/>
                                        <field name="network"/>
                                        <field name="nmask"/>
                                        <field name="olt_port_id" context="{'show_n': True}"/>
                                        <field name="olt_id" column_invisible="1"/>

                                        <field name="total_ips"/>
                                        <field name="used_ips"/>
                                        <field name="usage_percentage" widget="progressbar"/>
                                    </list>
                                </field>


                                <button name="generar" string="Generar IPs" type="object"/>

                                <field name="ip_address_ids" nolabel="1">
                                      <list colspan="2" >
                                    <field name="cidr"/>
                                           <field name="ip_int" column_invisible="1"/>
                            <field name="pool_id"/>
                            <field name="olt_port_id"/>
                            <field name="olt_id" column_invisible="1"/>

                                      </list>
                                </field>

                            </page>

                            <page name="config" string="Configuraciones Generales">
                                <group string="Tipo de Conexion">

                                    <group id="config1">


                                        <field name="tcont"/>
                                        <field name="gemport"/>
                                        <field name="vlan_ids" widget="many2many_tags"/>

                                        <field name="g_name_service"/>

                                        <field name="is_line_nap" widget="boolean_toggle"/>


                                        <field name="pending_changes" invisible="1"/>
                                        <field name="service_port_internet"/>
                                        <field name="is_enable_remote_access_onu"/>


                                    </group>
                                    <group string="DNS">
                                        <field name="primary_dns"/>
                                        <field name="secondary_dns"/>

                                    </group>

                                    <!--group id="config2">
                                        <field name="is_extract_mac_onu" widget="boolean_toggle"/>
                                        <field name="is_control_mac_learn" widget="boolean_toggle"/>
                                        <field name="is_activation_bridge" widget="boolean_toggle"/>

                                        <field name="is_cutoff_reconnection" widget="boolean_toggle"/>
                                        <field name="is_disable_onu" widget="boolean_toggle"
                                               invisible="not is_cutoff_reconnection"/>
                                        <field name="is_shutdown_interface" widget="boolean_toggle"
                                               invisible="not is_cutoff_reconnection"/>
                                        <field name="is_cutoff_port" widget="boolean_toggle"/>
                                        <field name="is_reduce_script" widget="boolean_toggle"/>
                                        <field name="is_redirect_srvport" widget="boolean_toggle"/>
                                        <field name="is_active_wan_onu" widget="boolean_toggle"/>
                                    </group-->
                                </group>
                                <!--group>
                                    <group id="config3">


                                        <field name="port_vlan" widget="boolean_toggle"
                                              />
                                        <field name="wan_maximum" widget="boolean_toggle"
                                              />

                                    </group>
                                    <group id="config4">
                                        <field name="type_access_net" required="1"/>
                                        <field name="dhcp_custom_server" invisible="type_access_net != 'dhcp_leases'"/>

                                        <field name="traffic_table"/>

                                        <field name="is_not_user_encap_ipoe" widget="boolean_toggle"/>
                                        <field name="is_uplink_port_vlan" widget="boolean_toggle"/>
                                        <field name="is_product_vlan" widget="boolean_toggle"/>
                                        <field name="is_custom_pon_vlan" widget="boolean_toggle"/>
                                        <field name="service_port_internet" />
                                    </group>
                                </group-->
                                <!--group string="Ancho de Banda" invisible="description != 'vsol'">
                                    <field name="description" invisible="1" readonly="1"/>
                                    <field name="is_control_bandwidth" widget="boolean_toggle"/>
                                    <field name="is_control_upstream" widget="boolean_toggle"
                                           invisible="not is_control_bandwidth"/>
                                </group-->

                                <group name="pppoe_1" string="Gesti&#243;n WAN ONU">
                                    <group>
                                        <field name="connection_wan"/>
                                        <!-- <field name="protocol_mode"/> -->
                                        <field name="protocol_type"/>
                                        <field name="wan_mode"/>
                                        <field name="service_type"/>
                                        <field name="acquisition_mode"/>
                                    </group>
                                    <group>
                                        <field name="mtu"/>
                                        <field name="is_enable_nat" widget="boolean_toggle"/>
                                        <field name="is_disabled_dhcp_pv4" widget="boolean_toggle"/>
                                        <field name="is_control_admin" widget="boolean_toggle"/>
                                        <field name="admin_user" invisible="is_control_admin== False"/>
                                        <field name="admin_passwd" invisible="is_control_admin== False"/>
                                    </group>
                                </group>

                                <group string="VSOL Profiles">
                                    <group>
                                        <field name="profile_onu_generic"/>
                                        <field name="profile_dba_gestion"/>
                                        <field name="profile_dba_internet"/>
                                    </group>
                                    <group>
                                        <field name="dhcp_client" widget="boolean_toggle" invisible="1"/>
                                        <field name="is_serial_onu_hex" widget="boolean_toggle" on_change="1"/>
                                        <field name="is_serial_onu_ascii" widget="boolean_toggle" on_change="1"/>
                                    </group>
                                </group>
                                <!--group>
                                    <group>
                                        <field name="is_virtual" widget="boolean_toggle"/>
                                    </group>
                                    <group>

                                        <field name="silver_core_port_line_id"
                                               options="{'no_create': True,  'no_open': True}"
                                                can_create="true"
                                               can_write="true"/>
                                    </group>
                                </group-->
                                <!--group>
                                    <group string="Configuracion OLT">
                                        <field name="is_write_olt" widget="boolean_toggle"/>
                                    </group>
                                    <group string="Configuracion ONT" invisible="description != 'zte'">
                                        <field name="is_enable_remote_access_onu" widget="boolean_toggle"/>
                                    </group>
                                </group-->


                                <!--group string="Binding Option">
                                <div>
                                <strong>LAN1 </strong> <field name="lan1" />
                                <strong>LAN2 </strong> <field name="lan2" />
                                <strong>LAN3 </strong> <field name="lan3" />
                                <strong>LAN4 </strong> <field name="lan4" />
                                </div> <br/>
                                <div>
                                <strong>SSID1 </strong> <field name="ssid1" />
                                <strong>SSID2 </strong> <field name="ssid2" />
                                <strong>SSID3 </strong> <field name="ssid3" />
                                <strong>SSID4 </strong> <field name="ssid4" />
                                <strong>SSID5 </strong> <field name="ssid5" />
                                <strong>SSID6 </strong> <field name="ssid6" />
                                <strong>SSID7 </strong> <field name="ssid7" />
                                <strong>SSID8 </strong> <field name="ssid8" />

                                </div>
                                </group-->

                            </page>



                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
    </data>
</odoo>
