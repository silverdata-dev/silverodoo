<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- isp.olt -->
        <record id="action_isp_olt" model="ir.actions.act_window">
            <field name="name">Equipos OLT</field>
            <field name="res_model">isp.olt</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="view_isp_olt_tree" model="ir.ui.view">
            <field name="name">isp.olt.tree</field>
            <field name="model">isp.olt</field>
            <field name="arch" type="xml">
                <tree string="Equipos OLT ISP" default_order="name desc">
                    <field name="name"/>
                    <field name="brand_id"/>
                    <field name="model"/>
                    <field name="ip"/>
                    <field name="port"/>
                    <field name="username"/>
                    <field name="state" widget="badge" decoration-danger="state == 'down'"
                           decoration-success="state == 'active'"/>
                </tree>
            </field>
        </record>

        <record id="view_isp_olt_form" model="ir.ui.view">
            <field name="name">isp.olt.form</field>
            <field name="model">isp.olt</field>
            <field name="arch" type="xml">
                <form string="Equipo OLT ISP">
                    <header>
                        <button name="create_olt_card" string="Crear Tarjeta OLT" type="object"/>
                    </header>
                    <sheet string="Equipo OLT ISP">
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="action_view_olt_cards"
                                    icon="fa-arrows-v">
                                <field string="Tarjetas OLT" name="olt_card_count" widget="statinfo"/>
                            </button>
                            <button name="action_connect_olt" type="object" class="oe_stat_button" icon="fa-signal"
                                    string="Probar Conexion"/>
                            <button name="action_create_profile_olt" type="object" class="oe_stat_button"
                                    icon="fa-arrows-v" string="Crear Perfiles"/>
                            <button class="oe_stat_button" type="object" name="action_view_contracts" icon="fa-link">
                                <field string="Contratos" name="contracts_olt_count" widget="statinfo"/>
                            </button>

                        </div>
                        <widget name="web_ribbon" title="Active" invisible="state == 'down'"/>
                        <widget name="web_ribbon" title="Down" bg_color="bg-danger" invisible="state == 'active'"/>
                        <field name="state"/>
                        <div class="oe_title">
                            <h1>
                                <label for="name" string="Nombre"/>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group name="olt">
                            <group>
                                <field name="hostname_olt"/>
                                <field name="software_version"/>
                                <field name="is_core_baudcom" invisible="1"/>
                                <field name="core_ids" widget="many2many_tags" invisible="is_core_baudcom"/>
                                <field name="bridge_core_id" invisible="1"/>
                                <field name="is_vsol_marca" invisible="1"/>
                                <field name="is_brand_zte" invisible="1"/>
                                <field name="core_id"/>
                                <field name="node_id"/>
                            </group>
                            <group>
                                <field name="brand_id"/>
                                <field name="model"/>
                                <field name="num_slot_olt"/>
                            </group>
                        </group>
                        <group name="core_conexion" string="Datos Conexion">
                            <group>
                                <field name="ip"/>
                                <field name="port"/>
                                <field name="type_connection"/>
                                <field name="kex_algorithms_ids" widget="many2many_tags"/>
                            </group>
                            <group>
                                <field name="is_multi_user_olt" widget="boolean_toggle"/>
                                <field name="username" invisible="is_multi_user_olt"/>
                                <field name="password" password="True"/>
                                <button class="oe_inline oe_link " name="action_send_password"
                                        string=" â†’Enviar ContraseÃ±a" type="object"/>
                                <field name="secret_olt"/>
                            </group>
                        </group>
                        <notebook colspan="4">
                            <page name="config" string="Configuraciones Generales">
                                <group string="Tipo de Conexion">

                                    <group id="config1">

                                        <field name="is_pppoe" widget="boolean_toggle" on_change="1"/>
                                        <field name="is_ipoe" widget="boolean_toggle" on_change="1"/>
                                        <field name="is_mgn_service_port" widget="boolean_toggle"/>
                                        <field name="ges_gemport" invisible="not is_mgn_service_port"/>
                                        <field name="g_name_service" invisible="not is_mgn_service_port"/>
                                        <field name="is_custom_tcont" widget="boolean_toggle"/>
                                        <field name="tcont" invisible="not is_custom_tcont"/>
                                        <field name="is_custom_gempor" widget="boolean_toggle"/>
                                        <field name="gemport" invisible="not is_custom_gempor"/>

                                        <field name="is_line_nap" widget="boolean_toggle"/>
                                        <field name="is_gestion_pppoe" widget="boolean_toggle"/>
                                    </group>
                                    <group id="config2">
                                        <field name="is_extract_mac_onu" widget="boolean_toggle"/>
                                        <field name="is_control_mac_learn" widget="boolean_toggle"/>
                                        <field name="is_activation_bridge" widget="boolean_toggle"/>

                                        <field name="is_cutoff_reconnection" widget="boolean_toggle"/>
                                        <field name="is_disable_onu" widget="boolean_toggle"
                                               invisible="not is_cutoff_reconnection"/>
                                        <field name="is_shutdown_interface" widget="boolean_toggle"
                                               invisible="not is_cutoff_reconnection"/>
                                        <field name="is_cutoff_port" widget="boolean_toggle"/>
                                        <field name="is_reduce_script" widget="boolean_toggle"/>
                                        <field name="is_redirect_srvport" widget="boolean_toggle"/>
                                        <field name="is_active_wan_onu" widget="boolean_toggle"/>
                                    </group>
                                </group>
                                <group>
                                    <group id="config3">

                                        <field name="ont_srvprofile"/>
                                        <field name="ont_srvprofile_value" invisible="ont_srvprofile == 'idp'"/>
                                        <field name="ont_lineprofile"/>
                                        <field name="ont_lineprofile_value" invisible="ont_lineprofile != 'idu'"/>
                                        <field name="send_srvprofile" widget="boolean_toggle"/>
                                        <field name="port_vlan" widget="boolean_toggle"
                                               invisible="not is_vsol_marca"/>
                                        <field name="wan_maximum" widget="boolean_toggle"
                                               invisible="not is_vsol_marca"/>
                                        <field name="name_service" invisible="not is_vsol_marca"/>
                                    </group>
                                    <group id="config4">
                                        <field name="type_access_net" required="1"/>
                                        <field name="dhcp_custom_server" invisible="type_access_net != 'dhcp_leases'"/>

                                        <field name="traffic_table"/>
                                        <field name="is_control_traffic_profile" widget="boolean_toggle"
                                               invisible="not is_brand_zte"/>
                                        <field name="is_not_user_encap_ipoe" widget="boolean_toggle"/>
                                        <field name="is_uplink_port_vlan" widget="boolean_toggle"/>
                                        <field name="is_product_vlan" widget="boolean_toggle"/>
                                        <field name="is_custom_pon_vlan" widget="boolean_toggle"/>
                                        <field name="service_port_internet" invisible="not is_vsol_marca"/>
                                    </group>
                                </group>
                                <group string="Ancho de Banda" invisible="description != 'vsol'">
                                    <field name="description" invisible="1" readonly="1"/>
                                    <field name="is_control_bandwidth" widget="boolean_toggle"/>
                                    <field name="is_control_upstream" widget="boolean_toggle"
                                           invisible="not is_control_bandwidth"/>
                                </group>
                                <group string="VSOL Profiles">
                                    <group>
                                        <field name="profile_onu_generic"/>
                                        <field name="profile_dba_gestion"/>
                                        <field name="profile_dba_internet"/>
                                    </group>
                                    <group>
                                        <field name="dhcp_client" widget="boolean_toggle" invisible="1"/>
                                        <field name="is_serial_onu_hex" widget="boolean_toggle" on_change="1"/>
                                        <field name="is_serial_onu_ascii" widget="boolean_toggle" on_change="1"/>
                                    </group>
                                </group>
                                <group>
                                    <group>
                                        <field name="is_virtual" widget="boolean_toggle"/>
                                    </group>
                                    <group>
                                        <field name="brand_description" invisible="1" readonly="1"/>
                                        <field name="isp_core_port_line_id"
                                               options="{'no_create': True,  'no_open': True}"
                                               invisible="brand_description != 'hua'" can_create="true"
                                               can_write="true"/>
                                    </group>
                                </group>
                                <group name="olt_tr">
                                    <group string="TR-069">
                                        <field name="is_active_tr" widget="boolean_toggle"/>
                                    </group>
                                    <group string="DNS" invisible="not is_v2_brand_zte">
                                        <field name="is_v2_brand_zte" invisible="1" readonly="1"/>
                                        <field name="primary_dns"/>
                                        <field name="secondary_dns"/>
                                    </group>
                                </group>
                                <group>
                                    <group string="Configuracion OLT">
                                        <field name="is_write_olt" widget="boolean_toggle"/>
                                    </group>
                                    <group string="Configuracion ONT" invisible="description != 'zte'">
                                        <field name="is_enable_remote_access_onu" widget="boolean_toggle"/>
                                    </group>
                                </group>
                            </page>

                            <page name="ip_addresses" string="Direcciones IP">
                                <field name="ip_address_ids">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="cidr"/>
                                        <field name="gateway"/>
                                        <field name="status"/>
                                        <field name="assigned_to"/>
                                        <field name="description"/>
                                    </tree>
                                </field>
                            </page>


                            <page string="Puertos">
                                   <field name="port_ids" >
                <tree string="Puertos OLT ISP" default_order="name desc">
                    <field name="name"/>
                    <field name="num_port"/>
                    <field name="olt_card_n"/>
                    <field name="type_access_net"/>
                </tree>
            </field>
                            </page>


                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
    </data>
</odoo>
